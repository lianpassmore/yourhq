---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.jsx';
import Footer from '../components/Footer.astro';
---

<Layout
  title="The Drive-Home Interview | YourHQ"
  description="Start your website build with a simple conversation."
>
  <Navbar client:load />

  <main class="bg-paper min-h-screen flex flex-col">

    <!-- HEADER -->
    <section class="pt-32 pb-16 border-b border-carbon/10 bg-[size:40px_40px] bg-grid-pattern relative">
      <!-- Fading overlay for grid -->
      <div class="absolute inset-0 bg-gradient-to-b from-transparent to-paper pointer-events-none"></div>
      
      <div class="relative max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        
        <!-- Dynamic Greeting Element -->
        <span class="inline-block py-1 px-3 rounded-full bg-signal/10 text-signal font-bold text-sm mb-6 tracking-wide uppercase">
          Step 01: Content Gathering
        </span>

        <h1 id="dynamic-greeting" class="text-5xl md:text-7xl font-extrabold tracking-tighter leading-[0.9] mb-6 text-carbon">
          The Drive-Home Interview.
        </h1>
        
        <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
          No forms. No typing. Just talk. <br class="hidden md:block"/>
          Your digital assistant is ready to take your brief.
        </p>
      </div>
    </section>

    <!-- INSTRUCTIONS CONTENT -->
    <section class="py-12 md:py-20 bg-paper flex-grow">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- Instruction Card -->
        <div class="bg-white border-2 border-carbon p-8 md:p-12 shadow-hard relative overflow-hidden">
          
          <!-- Decorative accent -->
          <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-signal via-hibiscus to-frangipani"></div>

          <div class="space-y-8">
            <div>
              <h2 class="text-2xl font-bold mb-4 flex items-center gap-3">
                <span class="flex items-center justify-center w-8 h-8 rounded-full bg-carbon text-white text-sm">1</span>
                How this works
              </h2>
              <p class="text-gray-600 leading-relaxed">
                You are about to speak with our <strong>YourHQ Assistant aka. Lian's Digital Voice</strong>. This isn't a live call, but an advanced AI trained to capture your business story. It takes about 10–15 minutes.
              </p>
            </div>

            <div>
              <h2 class="text-2xl font-bold mb-4 flex items-center gap-3">
                <span class="flex items-center justify-center w-8 h-8 rounded-full bg-carbon text-white text-sm">2</span>
                Before you start
              </h2>
              <ul class="space-y-3 text-gray-600">
                <li class="flex items-start gap-3">
                  <span class="text-signal mt-1">✓</span>
                  <span>Find a relatively quiet spot (or a car with the windows up).</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="text-signal mt-1">✓</span>
                  <span>Don't overthink it. Speak naturally, just like you're talking to a mate.</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="text-signal mt-1">✓</span>
                  <span>Tap the <strong>blue button</strong> in the bottom right corner to begin.</span>
                </li>
              </ul>
            </div>
            
            <!-- Privacy Notice (Micro-copy) -->
            <div class="mt-8 pt-6 border-t border-gray-100 text-xs text-gray-400">
              <p>
                <strong>Privacy Notice:</strong> By starting this conversation, you consent to your voice being recorded and processed by AI to generate your website content. We do not clone voices or sell data.
              </p>
            </div>

          </div>
        </div>

        <!-- Help Text -->
        <div class="text-center mt-8 text-sm text-gray-500">
          <p>Need help? Text us at <span class="text-carbon font-bold">022 172 5793</span></p>
        </div>

      </div>
    </section>

  </main>

  <Footer />

  <!-- ELEVENLABS VOICE AGENT WIDGET -->
  <elevenlabs-convai agent-id="agent_8801kbr4e3s1f32vwgejq4wdcezp"></elevenlabs-convai>
  <script is:inline src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>

  <!-- DYNAMIC GREETING SCRIPT -->
  <script is:inline>
    // This script checks the URL for a ?name= parameter
    // and updates the H1 tag to welcome them personally.
    
    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const name = urlParams.get('name');
      const greetingElement = document.getElementById('dynamic-greeting');

      if (name && greetingElement) {
        // Capitalize first letter just in case
        const cleanName = name.charAt(0).toUpperCase() + name.slice(1);
        greetingElement.innerHTML = `Kia ora, ${cleanName}.<br/>Ready for your interview?`;
      }
    });
  </script>

</Layout>